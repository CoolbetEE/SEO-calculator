<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SEO Revenue Calculator</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('https://i.imgur.com/4e8YmHp.png') repeat;
      transition: background 0.3s, color 0.3s;
    }
    body {
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }
    .container {
      max-width: 600px;
      width: 100%;
      padding: 30px;
      margin-top: 40px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      box-sizing: border-box;
      text-align: center;
      transition: background 0.3s, color 0.3s;
    }
    body.dark-mode {
      background-color: #121212;
    }
    .container.dark-mode {
      background-color: rgba(20, 20, 20, 0.95);
      color: white;
    }
    input, select, button {
      padding: 10px;
      margin: 10px 0;
      width: 100%;
      color: inherit;
      background-color: white;
      border-radius: 4px;
      font-size: 14px;
    }
    .dark-mode input,
    .dark-mode select,
    .dark-mode button {
      background-color: #333;
      color: #fff;
    }
    .result {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      text-align: left;
      background: #fff;
      border-radius: 5px;
    }
    .dark-mode .result {
      background: #222;
      border-color: #444;
    }
    .tooltip {
      font-weight: bold;
      cursor: help;
    }
    .flag {
      width: 24px;
      height: 16px;
      vertical-align: middle;
      margin-left: 5px;
    }
    #spinner {
      display: none;
      margin: 10px auto;
    }
    .fade-in {
      animation: fadeIn 1s ease-in-out;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    .revenue-number {
      color: #007BFF;
      font-weight: bold;
    }
    .header {
      margin-top: 10px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="container" id="calculatorBox">
    <img src="https://i.imgur.com/xpnQzsh.png" alt="Logo" style="max-width: 200px; margin-bottom: 20px;">
    <div class="header">
      <h2 style="margin-bottom: 5px;">SEO Revenue Calculator</h2>
      <p style="margin-top: 0px; font-size: 12px; color: gray;">by Edvard Kingissepp</p>
    </div>
    <button onclick="toggleDarkMode()">:crescent_moon: Toggle Theme</button>
    <label>Keyword:</label>
    <input type="text" id="keyword" placeholder="Enter keyword">
    <label>Monthly Search Volume:</label>
    <input type="number" id="volume" placeholder="Enter search volume">
    <label>Select Market:</label>
    <select id="market" onchange="setFlag();">
      <option value="FI">Finland</option>
      <option value="SE">Sweden</option>
      <option value="EE">Estonia</option>
      <option value="CA">Canada</option>
      <option value="CL">Chile</option>
      <option value="EC">Ecuador</option>
      <option value="IS">Iceland</option>
      <option value="MX">Mexico</option>
      <option value="NO">Norway</option>
      <option value="ONT">Ontario</option>
      <option value="PE">Peru</option>
    </select>
    <span id="flagDisplay"></span>
    <label>Use NGR or Turnover:</label>
    <select id="valueType">
      <option value="ngr">NGR</option>
      <option value="turnover">Turnover</option>
    </select>
    <button onclick="calculateRevenue()">Calculate</button>
    <div id="spinner">:hourglass_flowing_sand: Calculating...</div>
    <div id="output" class="result"></div>
  </div>
  <script>
    const flags = {
      FI: "https://flagcdn.com/fi.svg",
      SE: "https://flagcdn.com/se.svg",
      EE: "https://flagcdn.com/ee.svg",
      CA: "https://flagcdn.com/ca.svg",
      CL: "https://flagcdn.com/cl.svg",
      EC: "https://flagcdn.com/ec.svg",
      IS: "https://flagcdn.com/is.svg",
      MX: "https://flagcdn.com/mx.svg",
      NO: "https://flagcdn.com/no.svg",
      ONT: "https://flagcdn.com/ca.svg",
      PE: "https://flagcdn.com/pe.svg"
    };
    const data = {
      FI: { ngr: 62.75, turnover: 1616.56, cr: 0.05 },
      SE: { ngr: 46.27, turnover: 1324.77, cr: 0.05 },
      EE: { ngr: 44.22, turnover: 1267.34, cr: 0.05 },
      CA: { ngr: 35.26, turnover: 2578.08, cr: 0.04 },
      CL: { ngr: 27.54, turnover: 531.64, cr: 0.03 },
      EC: { ngr: 16.62, turnover: 484.91, cr: 0.03 },
      IS: { ngr: 78.94, turnover: 1869.87, cr: 0.05 },
      MX: { ngr: 6.85, turnover: 497.3, cr: 0.03 },
      NO: { ngr: 117.41, turnover: 2757.3, cr: 0.05 },
      ONT: { ngr: -80.48, turnover: 1865.69, cr: 0.04 },
      PE: { ngr: 26.14, turnover: 443.48, cr: 0.03 }
    };
    const visibility = [
      { ctr: 0.30, label: "Position 1" },
      { ctr: 0.15, label: "Position 2" },
      { ctr: 0.10, label: "Position 3" },
      { ctr: 0.07, label: "Position 4" },
      { ctr: 0.05, label: "Position 5" },
      { ctr: 0.03, label: "Positions 6–10" }
    ];
    function setFlag() {
      const market = document.getElementById('market').value;
      document.getElementById('flagDisplay').innerHTML = `<img class="flag" src="${flags[market]}" alt="flag">`;
    }
    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
      document.getElementById("calculatorBox").classList.toggle("dark-mode");
    }
    function animateNumber(target, element) {
      let current = 0;
      const step = Math.ceil(target / 40);
      const interval = setInterval(() => {
        current += step;
        if (current >= target) {
          element.textContent = target;
          clearInterval(interval);
        } else {
          element.textContent = current;
        }
      }, 10);
    }
    function calculateRevenue() {
      const volume = parseFloat(document.getElementById('volume').value);
      const market = document.getElementById('market').value;
      const valueType = document.getElementById('valueType').value;
      if (isNaN(volume)) return;
      const { cr, ngr, turnover } = data[market];
      const aov = valueType === 'ngr' ? ngr : turnover;
      const output = document.getElementById("output");
      document.getElementById("spinner").style.display = "block";
      output.innerHTML = "";
      setTimeout(() => {
        let html = "";
        visibility.forEach(({ ctr, label }, index) => {
          const traffic = Math.round(volume * ctr);
          const conv = Math.round(traffic * cr);
          const rev = Math.round(conv * aov);
          html += `<p class='fade-in'>
              <b>${(ctr * 100).toFixed(1)}% visibility (${label})</b><br>
              Traffic: <span class='revenue-number' id='traffic-${index}'>0</span><br>
              Conversions: <span class='revenue-number' id='conv-${index}'>0</span><br>
              Estimated Revenue: €<span class='revenue-number' id='rev-${index}'>0</span>
            </p>`;
        });
        output.innerHTML = html;
        document.getElementById("spinner").style.display = "none";
        visibility.forEach(({ ctr }, index) => {
          animateNumber(Math.round(volume * ctr), document.getElementById(`traffic-${index}`));
          animateNumber(Math.round(volume * ctr * cr), document.getElementById(`conv-${index}`));
          animateNumber(Math.round(volume * ctr * cr * aov), document.getElementById(`rev-${index}`));
        });
      }, 500);
    }
  </script>
</body>
</html>
